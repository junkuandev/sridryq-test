<style>
  .announcement-bar {
    width: 100%;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
  }

  .announcement-bar__message,
  .announcement-bar__link {
    line-height: 1.4;
  }

  .announcement-bar__item {
    text-align: center;
  }

  .announcement-bar__message p {
    margin: 0; /* Shopify richtext wraps with <p>, prevent double spacing */
  }
</style>

<div
  class="announcement-bar color-{{ section.settings.color_scheme }}"
  style="height: {{ section.settings.bar_height }}px;"
>
  <div class="page-width" style="height: 100%; display: flex; align-items: center; justify-content: center;">
    {% if section.blocks.size > 0 %}
      {%- for block in section.blocks -%}
        <div class="announcement-bar__item" {{ block.shopify_attributes }}>
          {% if block.settings.link != blank %}
            <a href="{{ block.settings.link }}" class="announcement-bar__link">
              {{ block.settings.text }}
            </a>
          {% else %}
            <div class="announcement-bar__message">
              {{ block.settings.text }}
            </div>
          {% endif %}
        </div>
      {%- endfor -%}
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Announcement bar",
  "max_blocks": 12,
  "class": "section-announcement-bar",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "auto_rotate",
      "label": "Auto-rotate multiple announcements",
      "default": false
    },
    {
      "type": "range",
      "id": "change_slides_speed",
      "label": "Slide change speed (seconds)",
      "min": 3,
      "max": 10,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "bar_height",
      "label": "Announcement bar height",
      "min": 30,
      "max": 150,
      "step": 2,
      "unit": "px",
      "default": 50
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "Announcement",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Announcement text",
          "default": "<p><strong>Welcome</strong> to our store!</p>"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Optional link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Announcement bar",
      "blocks": [{ "type": "announcement" }]
    }
  ]
}
{% endschema %}
